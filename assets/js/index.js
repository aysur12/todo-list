(()=>{var M=(t,e)=>{localStorage.setItem(e,JSON.stringify(t))},i=M;var P=t=>{let e=t.filter(o=>o.checked===!0);i(e,"completedList")},n=P;var V=t=>{let e=t.filter(o=>o.checked===!1);i(e,"activeList")},a=V;var z=(t,e)=>{e=JSON.parse(localStorage.getItem("todoList"))||[];let o={id:e.length>0?e[e.length-1].id+1:1,text:t,checked:!1};e.push(o),i(e,"todoList"),n(e),a(e)},x=z;var G=t=>t.filter(o=>o.checked===!1).length,L=G;var Q=t=>{let e=document.querySelector(".js-todo__count-value");e.innerHTML=L(t);let o=document.querySelector(".js-todo__count-text");o.innerHTML=L(t)>1?"items":"item"},I=Q;var R=(t,...e)=>{let o=document.createElement(t);return e&&o.classList.add(...e),o},d=R;var U=t=>{let e=document.querySelector(".js-list");for(;e.firstChild;)e.removeChild(e.firstChild);t.forEach(o=>{let{id:l,text:m,checked:k}=o,h=d("li",...["list__item","js-list__item"]);h.id=l;let T=d("label","list__checkbox"),_=d("input",...["list__checkbox-input","js-list__checkbox-input"]);_.type="checkbox",_.checked=k;let f=d("span",...["list__checkbox-span","js-list__checkbox-span"]);if(k){f.classList.add("list__checkbox-span_checked");let B=d("s",...["list__strikethrough-block","js-list__strikethrough-block"]);B.textContent=m.trim(),f.append(B)}else f.textContent=m.trim();let K=d("button",...["list__delete-button","js-list__delete-button"]);e.append(h),h.append(T,f,K),T.append(_)})},b=U;var W=(t,e,o)=>{t.length===0?e.classList.add(o):e.classList.remove(o)},C=W;var X=(t,e,o)=>{t.some(l=>l.checked===!0)?e.classList.remove(o):e.classList.add(o)},j=X;var Y=t=>{let e=document.querySelector(".js-todo__dropdown-button"),o=document.querySelector(".js-todo__footer"),l=document.querySelector(".js-todo__footer-button_clear-completed");b(t),I(JSON.parse(localStorage.getItem("todoList"))||[]),C(JSON.parse(localStorage.getItem("todoList"))||[],e,"todo__dropdown-button_hidden"),C(JSON.parse(localStorage.getItem("todoList"))||[],o,"todo__footer_hidden"),j(t,l,"todo__footer-button_clear-completed_hidden")},s=Y;var Z=()=>{let t=document.querySelector(".js-todo__footer-button_filter_active");return localStorage.getItem("button-id")===t.id},c=Z;var $=()=>{let t=document.querySelector(".js-todo__footer-button_filter_completed");return localStorage.getItem("button-id")===t.id},r=$;var tt=t=>{let e=document.querySelector(".js-form"),o=document.querySelector(".js-form__input"),l=o.value.trim();t.target===e&&t.preventDefault(),l!==""&&(x(l,JSON.parse(localStorage.getItem("todoList"))),r()?s(JSON.parse(localStorage.getItem("completedList"))):c()?s(JSON.parse(localStorage.getItem("activeList"))):s(JSON.parse(localStorage.getItem("todoList"))||[])),o.value=""},u=tt;var et=document.querySelector(".js-form");et.addEventListener("submit",u);var ot=(t,e)=>{e.forEach(o=>{o.id===t&&(o.checked=!o.checked,i(e,"todoList"),n(e),a(e))})},y=ot;var st=t=>{if(t.target.classList.contains("js-list__checkbox-input")){let e=t.target.closest(".js-list__item"),o=parseInt(e.id,10);y(o,JSON.parse(localStorage.getItem("todoList"))),r()?s(JSON.parse(localStorage.getItem("completedList"))):c()?s(JSON.parse(localStorage.getItem("activeList"))):s(JSON.parse(localStorage.getItem("todoList")))}},v=st;var lt=(t,e)=>{e.forEach((o,l)=>{o.id===t&&(e.splice(l,1),i(e,"todoList"),n(e),a(e))})},g=lt;var it=t=>{if(t.target.classList.contains("js-list__delete-button")){let e=t.target.closest(".js-list__item"),o=parseInt(e.id,10);g(o,JSON.parse(localStorage.getItem("todoList"))),r()?s(JSON.parse(localStorage.getItem("completedList"))):c()?s(JSON.parse(localStorage.getItem("activeList"))):s(JSON.parse(localStorage.getItem("todoList")))}},E=it;var rt=t=>{t.target.classList.contains("js-list__checkbox-span")&&t.target.setAttribute("contenteditable",!0)},J=rt;var ct=(t,e,o)=>{o.forEach(l=>{l.id===t&&(l.text=e,i(o,"todoList"),n(o),a(o))})},O=ct;var nt=t=>{let e="";if(e=t.target.innerText.trim(),t.target.classList.contains("js-list__checkbox-span")){let o=t.target.closest(".js-list__item"),l=parseInt(o.id,10);e===""?(g(l,JSON.parse(localStorage.getItem("todoList"))),r()?s(JSON.parse(localStorage.getItem("completedList"))):c()?s(JSON.parse(localStorage.getItem("activeList"))):s(JSON.parse(localStorage.getItem("todoList")))):(O(l,e,JSON.parse(localStorage.getItem("todoList"))),r()?s(JSON.parse(localStorage.getItem("completedList"))):c()?s(JSON.parse(localStorage.getItem("activeList"))):s(JSON.parse(localStorage.getItem("todoList"))),e="")}},S=nt;var at=t=>{S(t)},N=at;var dt=t=>{let e=t.target.closest(".js-list__item"),o=parseInt(e.id,10);t.key==="Enter"?S(t):t.key==="Escape"&&(t.preventDefault(),JSON.parse(localStorage.getItem("todoList")).forEach(m=>{m.id===o&&(t.target.innerHTML=m.text)}))},F=dt;localStorage.getItem("todoList")&&s(JSON.parse(localStorage.getItem("todoList")));r()?s(JSON.parse(localStorage.getItem("completedList"))||[]):c()?s(JSON.parse(localStorage.getItem("activeList"))):s(JSON.parse(localStorage.getItem("todoList"))||[]);var p=document.querySelector(".js-list");p.addEventListener("change",v);p.addEventListener("click",E);p.addEventListener("dblclick",J);p.addEventListener("focusout",N);p.addEventListener("keydown",F);var mt=t=>{t.every(e=>e.checked===!1)||t.every(e=>e.checked===!0)?t.forEach(e=>{e.checked=!e.checked,i(t,"todoList"),n(t),a(t)}):t.forEach(e=>{e.checked===!1&&(e.checked=!0,i(t,"todoList"),n(t),a(t))})},w=mt;var pt=()=>{w(JSON.parse(localStorage.getItem("todoList"))),r()?s(JSON.parse(localStorage.getItem("completedList"))):c()?s(JSON.parse(localStorage.getItem("activeList"))):s(JSON.parse(localStorage.getItem("todoList")))},q=pt;var ft=(t,e,o)=>{t.addEventListener("click",()=>{e.forEach(l=>{l.classList.remove(o)}),t.classList.add(o),localStorage.setItem("button-id",t.id)})},A=ft;var ut=t=>{t=t.filter(e=>e.checked===!1),i(t,"todoList"),localStorage.removeItem("completedList")},D=ut;var gt=document.querySelector(".js-todo__dropdown-button");gt.addEventListener("click",q);var H=document.querySelectorAll(".js-todo__footer-button_filter"),St=localStorage.getItem("button-id")||"1";H.forEach(t=>{A(t,H,"todo__footer-button_active"),St===t.id&&t.classList.add("todo__footer-button_active")});var ht=document.querySelector(".js-todo__footer-button_filter_all");ht.addEventListener("click",()=>{s(JSON.parse(localStorage.getItem("todoList")))});var _t=document.querySelector(".js-todo__footer-button_filter_active");_t.addEventListener("click",()=>{s(JSON.parse(localStorage.getItem("activeList"))||[])});var Lt=document.querySelector(".js-todo__footer-button_filter_completed");Lt.addEventListener("click",()=>{s(JSON.parse(localStorage.getItem("completedList"))||[])});var Ct=document.querySelector(".js-todo__footer-button_clear-completed");Ct.addEventListener("click",()=>{D(JSON.parse(localStorage.getItem("todoList"))),r()?s(JSON.parse(localStorage.getItem("completedList"))||[]):s(JSON.parse(localStorage.getItem("todoList")))});var kt=document.querySelector(".js-todo-container"),Tt=document.querySelector(".js-form__input");kt.addEventListener("click",t=>{t.composedPath().includes(Tt)||u(t)});})();
