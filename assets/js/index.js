(()=>{var K=(t,e)=>{localStorage.setItem(e,JSON.stringify(t))},i=K;var H=t=>{let e=t.filter(o=>o.checked===!0);i(e,"completedList")},c=H;var M=t=>{let e=t.filter(o=>o.checked===!1);i(e,"activeList")},n=M;var P=(t,e)=>{e=JSON.parse(localStorage.getItem("todoList"))||[];let o={id:e.length>0?e[e.length-1].id+1:1,text:t,checked:!1};e.push(o),i(e,"todoList"),c(e),n(e)},B=P;var V=t=>t.filter(o=>o.checked===!1).length,h=V;var z=t=>{let e=document.querySelector(".js-todo__count-value");e.innerHTML=h(t);let o=document.querySelector(".js-todo__count-text");o.innerHTML=h(t)>1?"items":"item"},I=z;var G=(t,...e)=>{let o=document.createElement(t);return e&&o.classList.add(...e),o},a=G;var Q=t=>{let e=document.querySelector(".js-list");for(;e.firstChild;)e.removeChild(e.firstChild);t.forEach(o=>{let{id:l,text:L,checked:C}=o,g=a("li",...["list__item","js-list__item"]);g.id=l;let k=a("label","list__checkbox"),S=a("input",...["list__checkbox-input","js-list__checkbox-input"]);S.type="checkbox",S.checked=C;let m=a("span",...["list__checkbox-span","js-list__checkbox-span"]);if(C){m.classList.add("list__checkbox-span_checked");let T=a("s",...["list__strikethrough-block","js-list__strikethrough-block"]);T.textContent=L.trim(),m.append(T)}else m.textContent=L.trim();let A=a("button",...["list__delete-button","js-list__delete-button"]);e.append(g),g.append(k,m,A),k.append(S)})},x=Q;var R=(t,e,o)=>{t.length===0?e.classList.add(o):e.classList.remove(o)},_=R;var U=(t,e,o)=>{t.some(l=>l.checked===!0)?e.classList.remove(o):e.classList.add(o)},y=U;var W=t=>{let e=document.querySelector(".js-todo__dropdown-button"),o=document.querySelector(".js-todo__footer"),l=document.querySelector(".js-todo__footer-button_clear-completed");x(t),I(JSON.parse(localStorage.getItem("todoList"))||[]),_(JSON.parse(localStorage.getItem("todoList"))||[],e,"todo__dropdown-button_hidden"),_(JSON.parse(localStorage.getItem("todoList"))||[],o,"todo__footer_hidden"),y(t,l,"todo__footer-button_clear-completed_hidden")},s=W;var X=()=>{let t=document.querySelector(".js-todo__footer-button_filter_active");return localStorage.getItem("button-id")===t.id},d=X;var Y=()=>{let t=document.querySelector(".js-todo__footer-button_filter_completed");return localStorage.getItem("button-id")===t.id},r=Y;var Z=t=>{let e=document.querySelector(".js-form"),o=document.querySelector(".js-form__input"),l=o.value.trim();t.target===e&&t.preventDefault(),l!==""&&(B(l,JSON.parse(localStorage.getItem("todoList"))),r()?s(JSON.parse(localStorage.getItem("completedList"))):d()?s(JSON.parse(localStorage.getItem("activeList"))):s(JSON.parse(localStorage.getItem("todoList"))||[])),o.value=""},p=Z;var $=document.querySelector(".js-form");$.addEventListener("submit",p);var tt=(t,e)=>{e.forEach(o=>{o.id===t&&(o.checked=!o.checked,i(e,"todoList"),c(e),n(e))})},b=tt;var et=t=>{if(t.target.classList.contains("js-list__checkbox-input")){let e=t.target.closest(".js-list__item"),o=parseInt(e.id,10);b(o,JSON.parse(localStorage.getItem("todoList"))),r()?s(JSON.parse(localStorage.getItem("completedList"))):d()?s(JSON.parse(localStorage.getItem("activeList"))):s(JSON.parse(localStorage.getItem("todoList")))}},j=et;var ot=(t,e)=>{e.forEach((o,l)=>{o.id===t&&(e.splice(l,1),i(e,"todoList"),c(e),n(e))})},f=ot;var st=t=>{if(t.target.classList.contains("js-list__delete-button")){let e=t.target.closest(".js-list__item"),o=parseInt(e.id,10);f(o,JSON.parse(localStorage.getItem("todoList"))),r()?s(JSON.parse(localStorage.getItem("completedList"))):d()?s(JSON.parse(localStorage.getItem("activeList"))):s(JSON.parse(localStorage.getItem("todoList")))}},v=st;var lt=t=>{t.target.classList.contains("js-list__checkbox-span")&&t.target.setAttribute("contenteditable",!0)},E=lt;var it=(t,e,o)=>{o.forEach(l=>{l.id===t&&(l.text=e,i(o,"todoList"),c(o),n(o))})},J=it;var rt=t=>{let e=t.target.closest(".js-list__item"),o=parseInt(e.id,10);if(t.key==="Enter"){let l="";t.target.classList.contains("js-list__checkbox-span")&&(l=t.target.innerText.trim(),l===""?(f(o,JSON.parse(localStorage.getItem("todoList"))),s(JSON.parse(localStorage.getItem("todoList")))):(J(o,l,JSON.parse(localStorage.getItem("todoList"))),s(JSON.parse(localStorage.getItem("todoList"))),l=""))}else t.key==="Escape"&&s(JSON.parse(localStorage.getItem("todoList")))},O=rt;localStorage.getItem("todoList")&&s(JSON.parse(localStorage.getItem("todoList")));r()?s(JSON.parse(localStorage.getItem("completedList"))||[]):d()?s(JSON.parse(localStorage.getItem("activeList"))):s(JSON.parse(localStorage.getItem("todoList"))||[]);var u=document.querySelector(".js-list");u.addEventListener("change",j);u.addEventListener("click",v);u.addEventListener("dblclick",E);u.addEventListener("keydown",O);var ct=t=>{t.every(e=>e.checked===!1)||t.every(e=>e.checked===!0)?t.forEach(e=>{e.checked=!e.checked,i(t,"todoList"),c(t),n(t)}):t.forEach(e=>{e.checked===!1&&(e.checked=!0,i(t,"todoList"),c(t),n(t))})},N=ct;var nt=()=>{N(JSON.parse(localStorage.getItem("todoList"))),r()?s(JSON.parse(localStorage.getItem("completedList"))):d()?s(JSON.parse(localStorage.getItem("activeList"))):s(JSON.parse(localStorage.getItem("todoList")))},F=nt;var dt=(t,e,o)=>{t.addEventListener("click",()=>{e.forEach(l=>{l.classList.remove(o)}),t.classList.add(o),localStorage.setItem("button-id",t.id)})},w=dt;var at=t=>{t=t.filter(e=>e.checked===!1),i(t,"todoList"),localStorage.removeItem("completedList")},q=at;var mt=document.querySelector(".js-todo__dropdown-button");mt.addEventListener("click",F);var D=document.querySelectorAll(".js-todo__footer-button_filter"),pt=localStorage.getItem("button-id")||"1";D.forEach(t=>{w(t,D,"todo__footer-button_active"),pt===t.id&&t.classList.add("todo__footer-button_active")});var ft=document.querySelector(".js-todo__footer-button_filter_all");ft.addEventListener("click",()=>{s(JSON.parse(localStorage.getItem("todoList")))});var ut=document.querySelector(".js-todo__footer-button_filter_active");ut.addEventListener("click",()=>{s(JSON.parse(localStorage.getItem("activeList"))||[])});var gt=document.querySelector(".js-todo__footer-button_filter_completed");gt.addEventListener("click",()=>{s(JSON.parse(localStorage.getItem("completedList"))||[])});var St=document.querySelector(".js-todo__footer-button_clear-completed");St.addEventListener("click",()=>{q(JSON.parse(localStorage.getItem("todoList"))),r()?s(JSON.parse(localStorage.getItem("completedList"))||[]):s(JSON.parse(localStorage.getItem("todoList")))});var ht=document.querySelector(".js-todo-container"),_t=document.querySelector(".js-form__input");ht.addEventListener("click",t=>{t.composedPath().includes(_t)||p(t)});})();
