(()=>{var D=(e,t)=>{localStorage.setItem(t,JSON.stringify(e))},i=D;var H=e=>{let t=e.filter(o=>o.checked===!0);i(t,"completedList")},c=H;var M=e=>{let t=e.filter(o=>o.checked===!1);i(t,"activeList")},n=M;var P=(e,t)=>{t=JSON.parse(localStorage.getItem("todoList"))||[];let o={id:t.length>0?t[t.length-1].id+1:1,text:e,checked:!1};t.push(o),i(t,"todoList"),c(t),n(t)},T=P;var V=e=>e.filter(o=>o.checked===!1).length,g=V;var z=e=>{let t=document.querySelector(".js-todo__count-value");t.innerHTML=g(e);let o=document.querySelector(".js-todo__count-text");o.innerHTML=g(e)>1?"items":"item"},B=z;var G=(e,...t)=>{let o=document.createElement(e);return t&&o.classList.add(...t),o},a=G;var K=e=>{let t=document.querySelector(".js-list");for(;t.firstChild;)t.removeChild(t.firstChild);e.forEach(o=>{let{id:l,text:_,checked:L}=o,f=a("li",...["list__item","js-list__item"]);f.id=l;let C=a("label","list__checkbox"),u=a("input",...["list__checkbox-input","js-list__checkbox-input"]);u.type="checkbox",u.checked=L;let m=a("span",...["list__checkbox-span","js-list__checkbox-span"]);if(m.contentEditable=!0,L){m.classList.add("list__checkbox-span_checked");let k=a("s",...["list__strikethrough-block","js-list__strikethrough-block"]);k.textContent=_,m.append(k)}else m.textContent=_;let A=a("button",...["list__delete-button","js-list__delete-button"]);t.append(f),f.append(C,m,A),C.append(u)})},I=K;var Q=(e,t,o)=>{e.length===0?t.classList.add(o):t.classList.remove(o)},S=Q;var R=(e,t,o)=>{e.some(l=>l.checked===!0)?t.classList.remove(o):t.classList.add(o)},x=R;var U=e=>{let t=document.querySelector(".js-todo__dropdown-button"),o=document.querySelector(".js-todo__footer"),l=document.querySelector(".js-todo__footer-button_clear-completed");I(e),B(JSON.parse(localStorage.getItem("todoList"))||[]),S(JSON.parse(localStorage.getItem("todoList"))||[],t,"todo__dropdown-button_hidden"),S(JSON.parse(localStorage.getItem("todoList"))||[],o,"todo__footer_hidden"),x(e,l,"todo__footer-button_clear-completed_hidden")},s=U;var W=()=>{let e=document.querySelector(".js-todo__footer-button_filter_active");return localStorage.getItem("button-id")===e.id},d=W;var X=()=>{let e=document.querySelector(".js-todo__footer-button_filter_completed");return localStorage.getItem("button-id")===e.id},r=X;var Y=e=>{let t=document.querySelector(".js-form"),o=document.querySelector(".js-form__input"),l=o.value;e.target===t&&e.preventDefault(),l!==""&&(T(l,JSON.parse(localStorage.getItem("todoList"))),r()?s(JSON.parse(localStorage.getItem("completedList"))):d()?s(JSON.parse(localStorage.getItem("activeList"))):s(JSON.parse(localStorage.getItem("todoList"))||[])),o.value=""},p=Y;var Z=document.querySelector(".js-form");Z.addEventListener("submit",p);var $=(e,t)=>{t.forEach(o=>{o.id===e&&(o.checked=!o.checked,i(t,"todoList"),c(t),n(t))})},j=$;var tt=e=>{if(e.target.classList.contains("js-list__checkbox-input")){let t=e.target.closest(".js-list__item"),o=parseInt(t.id,10);j(o,JSON.parse(localStorage.getItem("todoList"))),r()?s(JSON.parse(localStorage.getItem("completedList"))):d()?s(JSON.parse(localStorage.getItem("activeList"))):s(JSON.parse(localStorage.getItem("todoList")))}},v=tt;var et=(e,t)=>{t.forEach((o,l)=>{o.id===e&&(t.splice(l,1),i(t,"todoList"),c(t),n(t))})},y=et;var ot=e=>{if(e.target.classList.contains("js-list__delete-button")){let t=e.target.closest(".js-list__item"),o=parseInt(t.id,10);y(o,JSON.parse(localStorage.getItem("todoList"))),r()?s(JSON.parse(localStorage.getItem("completedList"))):d()?s(JSON.parse(localStorage.getItem("activeList"))):s(JSON.parse(localStorage.getItem("todoList")))}},b=ot;var st=(e,t,o)=>{o.forEach(l=>{l.id===e&&(l.text=t,i(o,"todoList"),c(o),n(o))})},E=st;var lt=e=>{let t="";if(e.target.classList.contains("js-list__checkbox-span")&&(t=e.target.innerText),t){let o=e.target.closest(".js-list__item"),l=parseInt(o.id,10);E(l,t,JSON.parse(localStorage.getItem("todoList"))),t=""}},J=lt;localStorage.getItem("todoList")&&s(JSON.parse(localStorage.getItem("todoList")));r()?s(JSON.parse(localStorage.getItem("completedList"))||[]):d()?s(JSON.parse(localStorage.getItem("activeList"))):s(JSON.parse(localStorage.getItem("todoList"))||[]);var h=document.querySelector(".js-list");h.addEventListener("change",v);h.addEventListener("click",b);h.addEventListener("focusout",J);var it=e=>{e.every(t=>t.checked===!1)||e.every(t=>t.checked===!0)?e.forEach(t=>{t.checked=!t.checked,i(e,"todoList"),c(e),n(e)}):e.forEach(t=>{t.checked===!1&&(t.checked=!0,i(e,"todoList"),c(e),n(e))})},O=it;var rt=()=>{O(JSON.parse(localStorage.getItem("todoList"))),r()?s(JSON.parse(localStorage.getItem("completedList"))):d()?s(JSON.parse(localStorage.getItem("activeList"))):s(JSON.parse(localStorage.getItem("todoList")))},N=rt;var ct=(e,t,o)=>{e.addEventListener("click",()=>{t.forEach(l=>{l.classList.remove(o)}),e.classList.add(o),localStorage.setItem("button-id",e.id)})},F=ct;var nt=e=>{e=e.filter(t=>t.checked===!1),i(e,"todoList"),localStorage.removeItem("completedList")},q=nt;var dt=document.querySelector(".js-todo__dropdown-button");dt.addEventListener("click",N);var w=document.querySelectorAll(".js-todo__footer-button_filter"),at=localStorage.getItem("button-id")||"1";w.forEach(e=>{F(e,w,"todo__footer-button_active"),at===e.id&&e.classList.add("todo__footer-button_active")});var mt=document.querySelector(".js-todo__footer-button_filter_all");mt.addEventListener("click",()=>{s(JSON.parse(localStorage.getItem("todoList")))});var pt=document.querySelector(".js-todo__footer-button_filter_active");pt.addEventListener("click",()=>{s(JSON.parse(localStorage.getItem("activeList"))||[])});var ft=document.querySelector(".js-todo__footer-button_filter_completed");ft.addEventListener("click",()=>{s(JSON.parse(localStorage.getItem("completedList"))||[])});var ut=document.querySelector(".js-todo__footer-button_clear-completed");ut.addEventListener("click",()=>{q(JSON.parse(localStorage.getItem("todoList"))),r()?s(JSON.parse(localStorage.getItem("completedList"))||[]):s(JSON.parse(localStorage.getItem("todoList")))});var gt=document.querySelector(".js-todo-container"),St=document.querySelector(".js-form__input");gt.addEventListener("click",e=>{e.composedPath().includes(St)||p(e)});})();
