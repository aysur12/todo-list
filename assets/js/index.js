(()=>{var K=(t,e)=>{localStorage.setItem(e,JSON.stringify(t))},s=K;var M=t=>{let e=t.filter(o=>o.checked);s(e,"completedList")},r=M;var P=t=>{let e=t.filter(o=>!o.checked);s(e,"activeList")},d=P;var V=(t,e)=>{e=JSON.parse(localStorage.getItem("todoList"))||[];let o={id:e.length?e[e.length-1].id+1:1,text:t,checked:!1};e.push(o),s(e,"todoList"),r(e),d(e)},y=V;var z=t=>t.filter(o=>!o.checked).length,k=z;var G=t=>{let e=document.querySelector(".js-todo__count-value");e.innerHTML=k(t);let o=document.querySelector(".js-todo__count-text");o.innerHTML=k(t)>1?"items":"item"},E=G;var Q=(t,e)=>{let o=e.find(l=>l.id===t);o.checked=!o.checked,s(e,"todoList"),r(e),d(e)},I=Q;var R=()=>{let t=document.querySelector(".js-todo__footer-button_filter_active");return localStorage.getItem("button-id")===t.id},h=R;var U=()=>{let t=document.querySelector(".js-todo__footer-button_filter_completed");return localStorage.getItem("button-id")===t.id},p=U;var X=()=>{p()?i(JSON.parse(localStorage.getItem("completedList"))):h()?i(JSON.parse(localStorage.getItem("activeList"))):i(JSON.parse(localStorage.getItem("todoList")))},n=X;var Y=t=>{let e=t.currentTarget.closest(".js-list__item"),o=Number(e.id);I(o,JSON.parse(localStorage.getItem("todoList"))),n()},B=Y;var Z=t=>{t.currentTarget.setAttribute("contenteditable",!0),t.currentTarget.focus()},v=Z;var $=(t,e,o)=>{let l=o.find(m=>m.id===t);l.text=e,s(o,"todoList"),r(o),d(o)},j=$;var tt=(t,e)=>{e=e.filter(o=>o.id!==t),s(e,"todoList"),r(e),d(e)},g=tt;var et=t=>{let e="";e=t.currentTarget.innerText.trim();let o=t.currentTarget.closest(".js-list__item"),l=Number(o.id);e?(j(l,e,JSON.parse(localStorage.getItem("todoList"))),e=""):g(l,JSON.parse(localStorage.getItem("todoList"))),n()},S=et;var ot=t=>{S(t)},F=ot;var lt=t=>{let e=t.currentTarget.closest(".js-list__item"),o=Number(e.id);if(t.key==="Enter")S(t);else if(t.key==="Escape"){let m=JSON.parse(localStorage.getItem("todoList")).find(f=>f.id===o);t.currentTarget.innerHTML=m.text,t.currentTarget.setAttribute("contenteditable",!1)}},N=lt;var st=t=>{let e=t.currentTarget.closest(".js-list__item"),o=Number(e.id);g(o,JSON.parse(localStorage.getItem("todoList"))),n()},J=st;var it=(t,...e)=>{let o=document.createElement(t);return e&&o.classList.add(...e),o},a=it;var rt=t=>{let e=document.querySelector(".js-list");for(;e.firstChild;)e.removeChild(e.firstChild);t&&t.forEach(o=>{let{id:l,text:m,checked:f}=o,T=a("li",...["list__item","js-list__item"]);T.id=l;let L=a("label","list__checkbox"),u=a("input",...["list__checkbox-input","js-list__checkbox-input"]);u.type="checkbox",u.checked=f,u.addEventListener("change",B);let c=a("span",...["list__checkbox-span","js-list__checkbox-span"]);if(c.contentEditable=!1,c.addEventListener("dblclick",v),c.addEventListener("focusout",F),c.addEventListener("keydown",N),f){c.classList.add("list__checkbox-span_checked");let b=a("s",...["list__strikethrough-block","js-list__strikethrough-block"]);b.textContent=m.trim(),c.append(b)}else c.textContent=m.trim();let x=a("button",...["list__delete-button","js-list__delete-button"]);x.addEventListener("click",J),e.append(T),T.append(L,c,x),L.append(u)})},O=rt;var dt=(t,e,o)=>{t.length?e.classList.remove(o):e.classList.add(o)},C=dt;var nt=(t,e,o)=>{t.some(l=>l.checked)?e.classList.remove(o):e.classList.add(o)},w=nt;var ct=t=>{let e=document.querySelector(".js-todo__dropdown-button"),o=document.querySelector(".js-todo__footer"),l=document.querySelector(".js-todo__footer-button_clear-completed");t&&(O(t),E(JSON.parse(localStorage.getItem("todoList"))||[]),C(JSON.parse(localStorage.getItem("todoList"))||[],e,"todo__dropdown-button_hidden"),C(JSON.parse(localStorage.getItem("todoList"))||[],o,"todo__footer_hidden"),w(t,l,"todo__footer-button_clear-completed_hidden"))},i=ct;var at=t=>{let e=document.querySelector(".js-form"),o=document.querySelector(".js-form__input"),l=o.value.trim();t.currentTarget===e&&t.preventDefault(),l&&(y(l,JSON.parse(localStorage.getItem("todoList"))),p()?i(JSON.parse(localStorage.getItem("completedList"))):h()?i(JSON.parse(localStorage.getItem("activeList"))):i(JSON.parse(localStorage.getItem("todoList"))||[])),o.value=""},_=at;var mt=document.querySelector(".js-form");mt.addEventListener("submit",_);localStorage.getItem("todoList")&&i(JSON.parse(localStorage.getItem("todoList")));n();var pt=t=>{t.every(e=>!e.checked)||t.every(e=>e.checked)?t.forEach(e=>{e.checked=!e.checked}):t.forEach(e=>{e.checked===!1&&(e.checked=!0)}),s(t,"todoList"),r(t),d(t)},q=pt;var ft=()=>{q(JSON.parse(localStorage.getItem("todoList"))),n()},W=ft;var ut=(t,e,o)=>{t.addEventListener("click",()=>{e.forEach(l=>{l.classList.remove(o)}),t.classList.add(o),localStorage.setItem("button-id",t.id)})},D=ut;var ht=t=>{t=t.filter(e=>!e.checked),s(t,"todoList"),localStorage.removeItem("completedList")},A=ht;var gt=document.querySelector(".js-todo__dropdown-button");gt.addEventListener("click",W);var H=document.querySelectorAll(".js-todo__footer-button_filter"),St=localStorage.getItem("button-id")||"1";H.forEach(t=>{D(t,H,"todo__footer-button_active"),St===t.id&&t.classList.add("todo__footer-button_active")});var _t=document.querySelector(".js-todo__footer-button_filter_all");_t.addEventListener("click",()=>{i(JSON.parse(localStorage.getItem("todoList")))});var Tt=document.querySelector(".js-todo__footer-button_filter_active");Tt.addEventListener("click",()=>{i(JSON.parse(localStorage.getItem("activeList"))||[])});var kt=document.querySelector(".js-todo__footer-button_filter_completed");kt.addEventListener("click",()=>{i(JSON.parse(localStorage.getItem("completedList"))||[])});var Ct=document.querySelector(".js-todo__footer-button_clear-completed");Ct.addEventListener("click",()=>{A(JSON.parse(localStorage.getItem("todoList"))),p()?i(JSON.parse(localStorage.getItem("completedList"))||[]):i(JSON.parse(localStorage.getItem("todoList")))});var Lt=document.querySelector(".js-todo-container"),xt=document.querySelector(".js-form__input");Lt.addEventListener("click",t=>{t.composedPath().includes(xt)||_(t)});})();
