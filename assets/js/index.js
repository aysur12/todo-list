(()=>{var M=(t,e)=>{localStorage.setItem(e,JSON.stringify(t))},l=M;var P=t=>{let e=t.filter(o=>o.checked===!0);l(e,"completedList")},r=P;var V=t=>{let e=t.filter(o=>o.checked===!1);l(e,"activeList")},c=V;var z=(t,e)=>{e=JSON.parse(localStorage.getItem("todoList"))||[];let o={id:e.length>0?e[e.length-1].id+1:1,text:t,checked:!1};e.push(o),l(e,"todoList"),r(e),c(e)},y=z;var G=t=>t.filter(o=>o.checked===!1).length,C=G;var Q=t=>{let e=document.querySelector(".js-todo__count-value");e.innerHTML=C(t);let o=document.querySelector(".js-todo__count-text");o.innerHTML=C(t)>1?"items":"item"},E=Q;var R=(t,...e)=>{let o=document.createElement(t);return e&&o.classList.add(...e),o},d=R;var U=t=>{let e=document.querySelector(".js-list");for(;e.firstChild;)e.removeChild(e.firstChild);t.forEach(o=>{let{id:s,text:m,checked:T}=o,_=d("li",...["list__item","js-list__item"]);_.id=s;let x=d("label","list__checkbox"),k=d("input",...["list__checkbox-input","js-list__checkbox-input"]);k.type="checkbox",k.checked=T;let p=d("span",...["list__checkbox-span","js-list__checkbox-span"]);if(p.contentEditable=!1,T){p.classList.add("list__checkbox-span_checked");let b=d("s",...["list__strikethrough-block","js-list__strikethrough-block"]);b.textContent=m.trim(),p.append(b)}else p.textContent=m.trim();let K=d("button",...["list__delete-button","js-list__delete-button"]);e.append(_),_.append(x,p,K),x.append(k)})},I=U;var X=(t,e,o)=>{t.length===0?e.classList.add(o):e.classList.remove(o)},L=X;var Y=(t,e,o)=>{t.some(s=>s.checked===!0)?e.classList.remove(o):e.classList.add(o)},B=Y;var Z=t=>{let e=document.querySelector(".js-todo__dropdown-button"),o=document.querySelector(".js-todo__footer"),s=document.querySelector(".js-todo__footer-button_clear-completed");I(t),E(JSON.parse(localStorage.getItem("todoList"))||[]),L(JSON.parse(localStorage.getItem("todoList"))||[],e,"todo__dropdown-button_hidden"),L(JSON.parse(localStorage.getItem("todoList"))||[],o,"todo__footer_hidden"),B(t,s,"todo__footer-button_clear-completed_hidden")},i=Z;var $=()=>{let t=document.querySelector(".js-todo__footer-button_filter_active");return localStorage.getItem("button-id")===t.id},u=$;var tt=()=>{let t=document.querySelector(".js-todo__footer-button_filter_completed");return localStorage.getItem("button-id")===t.id},a=tt;var et=t=>{let e=document.querySelector(".js-form"),o=document.querySelector(".js-form__input"),s=o.value.trim();t.target===e&&t.preventDefault(),s!==""&&(y(s,JSON.parse(localStorage.getItem("todoList"))),a()?i(JSON.parse(localStorage.getItem("completedList"))):u()?i(JSON.parse(localStorage.getItem("activeList"))):i(JSON.parse(localStorage.getItem("todoList"))||[])),o.value=""},h=et;var ot=document.querySelector(".js-form");ot.addEventListener("submit",h);var st=(t,e)=>{e.forEach(o=>{o.id===t&&(o.checked=!o.checked,l(e,"todoList"),r(e),c(e))})},j=st;var lt=()=>{a()?i(JSON.parse(localStorage.getItem("completedList"))):u()?i(JSON.parse(localStorage.getItem("activeList"))):i(JSON.parse(localStorage.getItem("todoList")))},n=lt;var it=t=>{if(t.target.classList.contains("js-list__checkbox-input")){let e=t.target.closest(".js-list__item"),o=parseInt(e.id,10);j(o,JSON.parse(localStorage.getItem("todoList"))),n()}},v=it;var rt=(t,e)=>{e.forEach((o,s)=>{o.id===t&&(e.splice(s,1),l(e,"todoList"),r(e),c(e))})},g=rt;var ct=t=>{if(t.target.classList.contains("js-list__delete-button")){let e=t.target.closest(".js-list__item"),o=parseInt(e.id,10);g(o,JSON.parse(localStorage.getItem("todoList"))),n()}},F=ct;var nt=t=>{t.target.classList.contains("js-list__checkbox-span")&&(t.target.setAttribute("contenteditable",!0),t.target.focus())},J=nt;var dt=(t,e,o)=>{o.forEach(s=>{s.id===t&&(s.text=e,l(o,"todoList"),r(o),c(o))})},O=dt;var at=t=>{let e="";if(e=t.target.innerText.trim(),t.target.classList.contains("js-list__checkbox-span")){let o=t.target.closest(".js-list__item"),s=parseInt(o.id,10);e===""?(g(s,JSON.parse(localStorage.getItem("todoList"))),n()):(O(s,e,JSON.parse(localStorage.getItem("todoList"))),n(),e="")}},S=at;var mt=t=>{S(t)},N=mt;var pt=t=>{let e=t.target.closest(".js-list__item"),o=parseInt(e.id,10);t.key==="Enter"?S(t):t.key==="Escape"&&(JSON.parse(localStorage.getItem("todoList")).forEach(m=>{m.id===o&&(t.target.innerHTML=m.text)}),t.target.setAttribute("contenteditable",!1))},w=pt;localStorage.getItem("todoList")&&i(JSON.parse(localStorage.getItem("todoList")));n();var f=document.querySelector(".js-list");f.addEventListener("change",v);f.addEventListener("click",F);f.addEventListener("dblclick",J);f.addEventListener("focusout",N);f.addEventListener("keydown",w);var ft=t=>{t.every(e=>e.checked===!1)||t.every(e=>e.checked===!0)?t.forEach(e=>{e.checked=!e.checked,l(t,"todoList"),r(t),c(t)}):t.forEach(e=>{e.checked===!1&&(e.checked=!0,l(t,"todoList"),r(t),c(t))})},q=ft;var ut=()=>{q(JSON.parse(localStorage.getItem("todoList"))),n()},W=ut;var ht=(t,e,o)=>{t.addEventListener("click",()=>{e.forEach(s=>{s.classList.remove(o)}),t.classList.add(o),localStorage.setItem("button-id",t.id)})},D=ht;var gt=t=>{t=t.filter(e=>e.checked===!1),l(t,"todoList"),localStorage.removeItem("completedList")},A=gt;var St=document.querySelector(".js-todo__dropdown-button");St.addEventListener("click",W);var H=document.querySelectorAll(".js-todo__footer-button_filter"),_t=localStorage.getItem("button-id")||"1";H.forEach(t=>{D(t,H,"todo__footer-button_active"),_t===t.id&&t.classList.add("todo__footer-button_active")});var kt=document.querySelector(".js-todo__footer-button_filter_all");kt.addEventListener("click",()=>{i(JSON.parse(localStorage.getItem("todoList")))});var Ct=document.querySelector(".js-todo__footer-button_filter_active");Ct.addEventListener("click",()=>{i(JSON.parse(localStorage.getItem("activeList"))||[])});var Lt=document.querySelector(".js-todo__footer-button_filter_completed");Lt.addEventListener("click",()=>{i(JSON.parse(localStorage.getItem("completedList"))||[])});var Tt=document.querySelector(".js-todo__footer-button_clear-completed");Tt.addEventListener("click",()=>{A(JSON.parse(localStorage.getItem("todoList"))),a()?i(JSON.parse(localStorage.getItem("completedList"))||[]):i(JSON.parse(localStorage.getItem("todoList")))});var xt=document.querySelector(".js-todo-container"),bt=document.querySelector(".js-form__input");xt.addEventListener("click",t=>{t.composedPath().includes(bt)||h(t)});})();
